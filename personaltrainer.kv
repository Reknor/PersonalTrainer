#MainLoginScreen:
#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import NumericField prelogin

# Menu screen before login
<MainLoginScreen>:
    BoxLayout:
        canvas:
            Color:
                rgb: 128/255, 128/255, 128/255
            Rectangle:
                size: self.size
        AnchorLayout:
            anchor_x: "center"
            anchor_y: "center"
            BoxLayout:
                orientation: "vertical"
                AnchorLayout:
                    anchor_x: "center"
                    anchor_y: "top"
                    Label:
                        text: "Personal Trainer"
                        font_size: (self.height / 60 + self.width / 120) * 6
                AnchorLayout:
                    #anchor_x: "center"
                    #anchor_y: "center"
                    size_hint: 1, .5
                    Button:
                        size_hint: .5, .5
                        font_size: (self.height / 60 + self.width / 120) * 6
                        background_color: 0, 1, 0, 1
                        text: 'Login'
                        on_press: root.manager.transition.direction = "down"
                        on_press: root.manager.current = 'login'
                AnchorLayout:
                    anchor_x: "center"
                    anchor_y: "center"
                    size_hint: 1, .5
                    Button:
                        size_hint: .5, .5
                        font_size: (self.height / 60 + self.width / 120) * 6
                        background_color: 0, 1, 0, 1
                        text: 'Register'
                        on_press: root.manager.transition.direction = "down"
                        on_press: root.manager.current = 'register-account'
                AnchorLayout:
                    anchor_x: "center"
                    anchor_y: "center"
                    size_hint: 1, .5
                    Button:
                        size_hint: .5, .5
                        # font_size: (self.height / 15) * 6
                        font_size: (self.height / 60 + self.width / 120) * 6
                        background_color: 1, 0, 0, 1
                        text: 'Exit'
                        on_press: root.exit()

# Login screen
<LoginScreen>:
    BoxLayout:
        canvas:
            Color:
                rgb: 128/255, 128/255, 128/255
            Rectangle:
                size: self.size
        orientation: "vertical"
        BoxLayout:
            id: login-info
            padding: "10dp"
            size_hint: 1, .2
        GridLayout:
            cols: 2
            rows: 2
            row_default_height: .2
            size_hint: 1, .4
            spacing: "10dp"
            padding: "50dp"
            Label:
                text: "Login"
                size_hint: .3, None
                height: root.height / 10
                # font_size: (self.height / 15) * 8
                font_size: (self.height / 60 + self.width / 120) * 12
            TextInput:
                id: login
                size_hint: .7, None
                height: root.height / 10
                multiline: False
                font_size: (self.height / 60 + self.width / 120) * 7
            Label:
                text: "Password"
                size_hint: .3, None
                height: root.height / 10
                font_size: (self.height / 60 + self.width / 120) * 12
                #height: "50dp"
            TextInput:
                id: password
                size_hint: .7, None
                height: root.height / 10
                multiline: False
                password: True
                font_size: (self.height / 60 + self.width / 120) * 7
                #height: "50dp"

        BoxLayout:
            orientation: "vertical"
            spacing: "5dp"
            padding: "10dp"
            size_hint: 1, .4
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                Button:
                    background_color: 0, 1, 0, 1
                    size_hint: .6, .8
                    text: 'Login'
                    font_size: (self.height / 15) * 6
                    on_press: root.login()
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                Button:
                    background_color: 1, 0, 0, 1
                    size_hint: .6, .8
                    text: 'Return'
                    font_size: (self.height / 15) * 6
                    on_press: root.manager.transition.direction = "up"
                    on_press: root.manager.current = 'menu-login'

# Register account screen
<RegisterAccountScreen>:
    BoxLayout:
        canvas:
            Color:
                rgb: 128/255, 128/255, 128/255
            Rectangle:
                size: self.size
        orientation: "vertical"
        BoxLayout:
            id: register-info
            padding: "50dp"
            size_hint: 1, .2
        GridLayout:
            cols: 2
            rows: 2
            row_default_height: .2
            size_hint: 1, .4
            spacing: "10dp"
            padding: "50dp"
            Label:
                text: "Login"
                size_hint: .3, None
                height: root.height / 10
                # font_size: (self.height / 15) * 8
                font_size: (self.height / 60 + self.width / 120) * 12
            TextInput:
                id: login-create
                size_hint: .7, None
                height: root.height / 10
                multiline: False
                font_size: (self.height / 60 + self.width / 120) * 7
            Label:
                text: "Password"
                size_hint: .3, None
                height: root.height / 10
                font_size: (self.height / 60 + self.width / 120) * 12
                #height: "50dp"
            TextInput:
                id: password-create
                size_hint: .7, None
                height: root.height / 10
                multiline: False
                font_size: (self.height / 60 + self.width / 120) * 7
                #height: "50dp"

        BoxLayout:
            orientation: "vertical"
            spacing: "5dp"
            padding: "10dp"
            size_hint: 1, .4
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                Button:
                    background_color: 0, 1, 0, 1
                    size_hint: .6, .8
                    text: 'Register'
                    font_size: (self.height / 15) * 6
                    on_press: root.register()
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                Button:
                    background_color: 1, 0, 0, 1
                    size_hint: .6, .8
                    text: 'Return'
                    font_size: (self.height / 15) * 6
                    on_press: root.manager.transition.direction = "up"
                    on_press: root.manager.current = 'menu-login'

# Register user screen
<RegisterUserScreen>:
    BoxLayout
        canvas:
            Color:
                rgb: 128/255, 128/255, 128/255
            Rectangle:
                size: self.size
        orientation: "vertical"
        # To display errors
        BoxLayout:
            size_hint: 1, .2
            id: register-user-info
            padding: "20dp"
        GridLayout:
            size_hint: 1, .6
            padding: ("20dp", "20dp", "20dp", 0)
            spacing: "10dp"
            cols: 2
            Label:
                font_size: (self.height / 60 + self.width / 120) * 7
                text: "Name"
            TextInput:
                id: name-create
                font_size: (self.height / 60 + self.width / 120) * 7
            Label:
                font_size: (self.height / 60 + self.width / 120) * 7
                text: "Weight (kg)"
            NumericField:
                id: weight-create
                allowed_len: 3
                font_size: (self.height / 60 + self.width / 120) * 7
            Label:
                font_size: (self.height / 60 + self.width / 120) * 7
                text: "Height (cm)"
            NumericField:
                id: height-create
                allowed_len: 3
                font_size: (self.height / 60 + self.width / 120) * 7
        BoxLayout:
            pos_hint: {'center_x': .5, 'center_y': .5}
            padding: ("10dp", 0, "10dp", 0)
            size_hint: .8, .4
            Label:
                font_size: (self.height / 60 + self.width / 120) * 8
                text: "male"
            CheckBox:
                id: malebox
                color: 1, 0, 0
                active: True
                on_active: active = not malebox.active
                on_active: femalebox.active = not malebox.active
                # canvas:
                    # Color:
                        # rgb: 0, 1, 0
                    # Rectangle:
                        # pos: malebox.center_x, malebox.center_y
                        # size: self.size
            Label:
                font_size: (self.height / 60 + self.width / 120) * 8
                text: "female"
            CheckBox
                id: femalebox
                color: 1, 0, 0
                active: not root.male_box_active
                on_active: active = not femalebox.active
                on_active: malebox.active = not femalebox.active
        BoxLayout:
            padding: ("10dp", 0, "10dp", 0)
            size_hint: .8, .2
            pos_hint_x: root.center_x
            pos_hint: {'center_x': .5, 'center_y': .5}
            Label:
                size_hint: .3, 1
                font_size: (self.height / 60 + self.width / 120) * 16
                text: "Date"
            BoxLayout:
                NumericField:
                    id: day-create
                    allowed_len: 2
                    size_hint: .5, 1
                    font_size: (self.height / 60 + self.width / 40) * 12
                Label:
                    size_hint: .2, 1
                    font_size: (self.height / 60 + self.width / 120) * 24
                    text: "/"
                NumericField:
                    id: month-create
                    allowed_len: 2
                    size_hint: .5, 1
                    font_size: (self.height / 60 + self.width / 40) * 12
                Label:
                    size_hint: .2, 1
                    font_size: (self.height / 60 + self.width / 120) * 24
                    text: "/"
                NumericField:
                    id: year-create
                    allowed_len: 4
                    size_hint: 1, 1
                    font_size: (self.height / 60 + self.width / 80) * 12
        BoxLayout:
            size_hint: 1, .3
            padding: (0, "20dp", 0, 0)
            Button:
                background_color: 0, 1, 0, 1
                font_size: (self.height / 60 + self.width / 120) * 6
                text: "Register"
                on_press: root.register()
            Button:
                background_color: 1, 0, 0, 1
                font_size: (self.height / 60 + self.width / 120) * 6
                text: "Cancel"


# Main menu screen
<MainMenuScreen>:
    AnchorLayout:
        canvas:
            Color:
                rgb: 128/255, 128/255, 128/255
            Rectangle:
                size: self.size
        orientation: "vertical"
        anchor_x: "center"
        anchor_y: "center"
        BoxLayout:
            orientation: "vertical"
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                Button:
                    text: "Workouts"
                    font_size: (self.height / 15) * 6
                    size_hint: .5, .5
                    on_press: root.manager.transition.direction = "down"
                    on_press: root.manager.current = "workouts"
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                Button:
                    text: "Profile"
                    font_size: (self.height / 15) * 6
                    size_hint: .5, .5
                    on_press: root.manager.transition.direction = "down"
                    on_press: root.manager.current = "profile"
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                Button:
                    text: "Exit"
                    font_size: (self.height / 15) * 6
                    size_hint: .5, .5
                    on_press: root.exit()

# Background color for any widget
<BackgroundColor>:
    background_color: 0, 1, 0, 1
    canvas.before:
        Color:
            rgba: root.background_color
        Rectangle:
            size: self.size
            pos: self.pos

# Label with binded color
<BackgroundLabel@Label+BackgroundColor>:
    size_hint: 1, 1

# Screen used to choose workout
<WorkoutsScreen>:
    BoxLayout:
        canvas:
            Color:
                rgb: 128/255, 128/255, 128/255
            Rectangle:
                size: self.size
        orientation: "vertical"
        BoxLayout:
            size_hint: 1, .15
            Button:
                text: ""
                active: False
                disabled: True
                background_color: 0/255, 0/255, 0/255
            Spinner:
                id: select-workout
                text: root.selected_workout_name
                on_text: root.change_workout(self)
            Button:
                text: ""
                active: False
                disabled: True
                background_color: 0/255, 0/255, 0/255
        ScrollView:
            bar_width: 20
            WorkoutDisplay:
                id: workout-display
                size_hint: 1, None
                spacing: "40dp"
                height: self.minimum_height
                orientation: "vertical"

        BoxLayout:
            size_hint: 1, .1
            Button:
                text: "Return"
                on_press: root.manager.transition.direction = "up"
                on_press: root.manager.current = "menu-main"
                background_color: 1, 0, 0, 1
            Spinner:
                id: select-difficulty
                text: root.selected_workout_diff
                values: root.difficulties_list
                on_text: root.change_difficulty(self)
            Button:
                text: "Start"
                on_press: root.manager.transition.direction = "left"
                on_press: root.start_workout()
                background_color: 0, 1, 0, 1

# Current exercise
<ExerciseScreen>:
    BoxLayout:
        canvas:
            Color:
                rgb: 128/255, 128/255, 128/255
            Rectangle:
                size: self.size
        orientation: "vertical"
        BoxLayout:
            size_hint: 1, .2
            BackgroundLabel:
                id: current-set
                text: ""
                background_color: 0/255, 0/255, 0/255
            BackgroundLabel:
                background_color: 50/255, 50/255, 50/255, 1
                text: root.timer_prop
                font_name: "fonts/Lcd.ttf"
                font_size: 40
            ProgressBox:
                ProgressBar:
                    max: root.progress_max
                    value: root.time_passed
        ScrollView:
            bar_width: 20
            BoxLayout:
                id: exercise-content
                size_hint: 1, None
                spacing: "40dp"
                height: self.minimum_height
                orientation: "vertical"

        BoxLayout:
            size_hint: 1, .1
            Button:
                text: "Cancel"
                on_press: root.manager.transition.direction = "right"
                on_press: root.stop_timer()
                on_press: root.manager.current = "workouts"
                background_color: 1, 0, 0, 1
            Button:
                text: ""
                active: False
                disabled: True
                background_color: 0/255, 0/255, 0/255
            Button:
                text: "Next"
                on_press: root.next_exercise(None)
                background_color: 0, 1, 0, 1

<ProfileScreen>:
    Button:
        text: "Menu"
        font_size: (self.height / 15) * 6
        on_press: root.manager.transition.direction = "up"
        on_press: root.manager.current = "menu-main"